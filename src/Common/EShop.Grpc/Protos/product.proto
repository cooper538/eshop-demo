syntax = "proto3";

option csharp_namespace = "EShop.Grpc.Product";
package product;

service ProductService {
  rpc ReserveStock (ReserveStockRequest) returns (ReserveStockResponse);
  rpc ReleaseStock (ReleaseStockRequest) returns (ReleaseStockResponse);
}

message ReserveStockRequest {
  string order_id = 1;
  reserved 2;
  repeated OrderItem items = 3;
}

message OrderItem {
  string product_id = 1;
  int32 quantity = 2;
}

message ReserveStockResponse {
  bool success = 1;
  optional string failure_reason = 2;
  repeated string failed_product_ids = 3;
}

message ReleaseStockRequest {
  string order_id = 1;
  reserved 2;
}

message ReleaseStockResponse {
  bool success = 1;
  optional string failure_reason = 2;
}
